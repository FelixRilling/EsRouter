"use strict";function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();!function(a,b){var c=function(){function b(){var a=arguments.length<=0||void 0===arguments[0]?[]:arguments[0],c=arguments.length<=1||void 0===arguments[1]?{before:null,done:null,fail:null,always:null}:arguments[1],d=arguments.length<=2||void 0===arguments[2]?{ajax:!1,slug:{preSlash:!0,urlFragmentInitator:"#",urlFragmentAppend:""}}:arguments[2];if(_classCallCheck(this,b),this.sections=a,this.events=c,this.options=d,this.slug=(d.slug.preSlash?"/":"")+d.slug.urlFragmentInitator+d.slug.urlFragmentAppend,this.active=null,this.activeId=null,this.defaultId=null,"undefined"==typeof this.sections[0])throw new Error("Sections undefined! are section datasets bound?")}return _createClass(b,[{key:"init",value:function(){this.defaultId=this.findData(this.sections,"sectionDefault","true").dataset.routerId;var a=this.getSlug();this.moveTo(a)}},{key:"moveTo",value:function(a){return this.events.before(a,this),this.activeId=a,this.setSlug(a),this.toggleActiveSection(a)||this.moveTo(this.defaultId),this.callback(this.activeId,this.active,this.getCurrentIndex()),a}},{key:"moveForward",value:function(){this.movePaginated(-1)}},{key:"moveBackward",value:function(){this.movePaginated(1)}},{key:"movePaginated",value:function(a){var b=this.getCurrentIndex();"undefined"!=typeof this.sections[b+a]&&this.moveTo(this.sections[b+a].dataset.routerId)}},{key:"toggleActiveSection",value:function(a){this.iterateDomNode(this.sections,function(a){a.classList.remove("active")});var b=this.findData(this.sections,"routerId",a);return"undefined"!=typeof b?(b.classList.add("active"),this.active=b,!0):!1}},{key:"getSlug",value:function(){var b=a.href.lastIndexOf(this.slug);return b>-1?a.href.substr(a.href.lastIndexOf(this.slug)+2):(this.initSlug(this.defaultId),this.getSlug())}},{key:"setSlug",value:function(b){a.href=a.href.substr(0,a.href.lastIndexOf(this.slug)+2)+b}},{key:"initSlug",value:function(b){a.href=a.href+"#"+b}},{key:"getCurrentIndex",value:function(){return this.getElementIndex(this.sections,this.active)}},{key:"getElementIndex",value:function(a,b){var c;return this.iterateDomNode(a,function(a,d){a===b&&(c=d)}),c}},{key:"findData",value:function(a,b,c){var d;return this.iterateDomNode(a,function(a){a.dataset[b]===c&&(d=a)}),d}},{key:"iterateDomNode",value:function(a,b){for(var c=0;c<a.length;c++)b(a[c],c)}}]),b}();b.esRouter=c}(location,window);