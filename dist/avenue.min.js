var Avenue=function(){"use strict";function e(e,t,n,i,a){if("function"==typeof e){var o=[t,n,i,a];e.apply(null,o)}}var t=window,n=t.document,i=t.location,a=function(e,t){return"[data-"+e+"-"+t+"]"},o=function(e,t){return e+t.substr(0,1).toUpperCase()+t.substr(1)},r=function(e,t,n){return e.dataset[o(t,n)]},u=function(e,t,n,i){e.dataset[o(t,n)]=i},s=function(e){var t=Object.keys(e.types),i={};return t.forEach(function(t,o){var r=a(e.prefix,e.types[t]);i[t]=n.querySelectorAll(r)}),i},f=function(e,t){[].forEach.call(e,function(e){t(e)})},d=function(e,t,n){f(e,function(e){e.addEventListener(t,function(t){n(e,t)},!1)})},l=function(e,t){i.hash=e+t},c=function(e){return i.hash.replace(e,"").replace("#","")},v=function(t){return{data:t.data,options:t.options,elements:t.elements,methods:{callback:e,slug:{setSlug:l,getSlug:c},dom:{queryElements:s,bind:d,readData:r,writeData:u}}}},p=function(t,n,i){var a=t.plugins,o=v(t);a.active.forEach(function(t){var r=a.container[t.name];if(!r)throw"Missing plugin "+t.name;var u=r[n];u&&e(u,i,o,t.options,t.events)}),e(t.events[n],i,o)},m=function(){var e=this,t=e.options,n=c(e.options.slugPrepend);return p(e,"beforeInit",{}),e.elements=s(t.attributes),t.autobind&&(d(e.elements.link,"click",function(n){var i=r(n,t.attributes.prefix,t.attributes.types.link);e.moveTo(i)}),d(e.elements.pagination,"click",function(n){var i=r(n,t.attributes.prefix,t.attributes.types.pagination);e.moveBy(+i)})),f(e.elements.field,function(n){var i=r(n,t.attributes.prefix,t.attributes.types.field);n===e.elements.fieldDefault[0]&&(e.data.defaultId=i),e.data.ids.push(i)}),""!==n?e.moveTo(n):e.moveTo(e.data.defaultId),p(e,"afterInit",{}),e},b=function(e){var t=this;if(t.data.ids.indexOf(e)>-1){var n=t.data.ids.indexOf(e);p(t,"beforeMove",{id:e,index:n,element:t.elements.field[n]}),t.data.activeId=e,t.data.index=n,l(t.options.slugPrepend,e),p(t,"afterMove",{id:e,index:n,element:t.elements.field[n]})}return t},g=function(e){var t=this,n=t.data.ids[t.data.index+e];if(void 0!==n)return b.call(t,n)},h=function e(t,n,i){var a=this;t=t||{},a.options={autobind:t.autobind||!0,slugPrepend:t.slugPrepend||"",attributes:{prefix:"router",types:{field:"section",fieldDefault:"default",link:"href",pagination:"pagin",source:"src"}}},n=n||{},a.events={beforeInit:n.beforeInit,afterInit:n.afterInit,beforeMove:n.beforeMove,afterMove:n.afterMove},a.plugins={active:i||[],container:e.plugins},a.data={ids:[],activeId:null,defaultId:null,index:0},a.elements={}};return h.plugins={},h.prototype={init:m,moveTo:b,moveBy:g,moveForward:function(){return this.moveBy(1)},moveBackward:function(){return this.moveBy(-1)}},h}();