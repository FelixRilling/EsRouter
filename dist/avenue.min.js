var Avenue=function(){"use strict";function e(e){var t=Object.keys(e.types),n={};return t.forEach(function(t,i){var a=d(e.prefix,e.types[t]);n[t]=s.querySelectorAll(a)}),n}function t(e,t,n){c(e,function(e){e.addEventListener(t,function(t){n(e,t)},!1)})}function n(e,t,n){return e.dataset[l(t,n)]}function i(i,a,o){function r(i,r){var u={data:a.data,options:a.options,elements:a.elements,methods:{dom:{queryElements:e,readData:n,bind:t},slug:{setSlug:p,getSlug:v}}},s=[o,u];r&&s.push(r),i.apply(a,s)}a.plugins.forEach(function(e){var t=e[0][i];t&&r(t,e[1])}),r(a.events[i])}function a(){var a=this,o=a.options,r=v(a.options.slugPrepend);return i("beforeInit",a,{}),a.elements=e(o.attributes),o.autobind&&(t(a.elements.link,"click",function(e){var t=n(e,o.attributes.prefix,o.attributes.types.link);a.moveTo(t)}),t(a.elements.pagination,"click",function(e){var t=n(e,o.attributes.prefix,o.attributes.types.pagination);a.moveBy(+t)})),c(a.elements.field,function(e){var t=n(e,o.attributes.prefix,o.attributes.types.field);e===a.elements.fieldDefault[0]&&(a.data.defaultId=t),a.data.ids.push(t)}),""!==r?a.moveTo(r):a.moveTo(a.data.defaultId),i("afterInit",a,{}),a}function o(e){var t=this;if(t.data.ids.indexOf(e)>-1){var n=t.data.ids.indexOf(e);i("beforeMove",t,{id:e,index:n,element:t.elements.field[n]}),t.data.activeId=e,t.data.index=n,p(t.options.slugPrepend,e),i("afterMove",t,{id:e,index:n,element:t.elements.field[n]})}return t}function r(e){var t=this,n=t.data.ids[t.data.index+e];if(void 0!==n)return o.call(t,n)}var u=window,s=u.document,f=u.location,d=function(e,t){return"[data-"+e+"-"+t+"]"},l=function(e,t){return e+t.substr(0,1).toUpperCase()+t.substr(1)},c=function(e,t){[].forEach.call(e,function(e){t(e)})},p=function(e,t){f.hash=e+t},v=function(e){return f.hash.replace(e,"").replace("#","")},m=function(e,t,n){var i=this;e=e||{},i.options={autobind:e.autobind||!0,slugPrepend:e.slugPrepend||"",attributes:{prefix:"router",types:{field:"section",fieldDefault:"default",link:"href",pagination:"pagin",source:"src"}}},t=t||{},i.events={beforeInit:t.beforeInit||function(){},afterInit:t.afterInit||function(){},beforeMove:t.beforeMove||function(){},afterMove:t.afterMove||function(){}},i.plugins=n||[],i.data={ids:[],activeId:null,defaultId:null,index:0},i.elements={}};return m.prototype={init:a,moveTo:o,moveBy:r,moveForward:function(){return this.moveBy(1)},moveBackward:function(){return this.moveBy(-1)}},m}();