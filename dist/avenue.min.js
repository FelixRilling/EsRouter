var Avenue=function(){"use strict";function t(t,e,n,i,a){if("function"==typeof t){var r=[e,n];i&&r.push(i),a&&r.push(a),t.apply(null,r)}}var e=window,n=e.document,i=e.location,a=function(t,e){return"[data-"+t+"-"+e+"]"},r=function(t,e){return t+e.substr(0,1).toUpperCase()+e.substr(1)},o=function(t,e,n){return t.dataset[r(e,n)]},u=function(t,e,n,i){t.dataset[r(e,n)]=i},s=function(t){var e=Object.keys(t.types),i={};return e.forEach(function(e,r){var o=a(t.prefix,t.types[e]);i[e]=n.querySelectorAll(o)}),i},f=function(t,e){[].forEach.call(t,function(t){e(t)})},d=function(t,e,n){f(t,function(t){t.addEventListener(e,function(e){n(t,e)},!1)})},c=function(t,e){i.hash=t+e},l=function(t){return i.hash.replace(t,"").replace("#","")},p=function(t,e){if(t.data.ids.indexOf(e)>-1){var n=t.data.ids.indexOf(e),i=t.elements.field[n];b(t,"beforeMove",{id:e,index:n,element:i}),t.data.activeId=e,t.data.index=n,c(t.options.slugPrepend,e),b(t,"afterMove",{id:e,index:n,element:i})}return t},v=function(t,e){var n=t.data.ids[t.data.index+e];if(void 0!==n)return p(t,n)},m=function(e){return{data:e.data,options:e.options,elements:e.elements,callback:t,util:{eachNode:f},move:{moveTo:function(t){return p(e,t)},moveBy:function(t){return v(e,t)}},slug:{setSlug:c,getSlug:l},dom:{queryElements:s,bind:d,readData:o,writeData:u}}},b=function(e,n,i){var a=e.plugins,r=m(e);a.active.forEach(function(e){var o=a.container[e.name];if(!o)throw"Missing plugin "+e.name;t(o[n],i,r,e.options,e.events)}),t(e.events[n],i,r)},h=function(){var t=this,e=t.options,n=l(t.options.slugPrepend);return b(t,"beforeInit",{}),t.elements=s(e.attributes),e.autobind&&(d(t.elements.link,"click",function(n){var i=o(n,e.attributes.prefix,e.attributes.types.link);p(t,i)}),d(t.elements.pagination,"click",function(n){var i=+o(n,e.attributes.prefix,e.attributes.types.pagination);v(t,i)})),f(t.elements.field,function(n){var i=o(n,e.attributes.prefix,e.attributes.types.field);n===t.elements.fieldDefault[0]&&(t.data.defaultId=i),t.data.ids.push(i)}),""!==n?p(t,n):p(t,t.data.defaultId),b(t,"afterInit",{}),t},g=function t(e,n,i){var a=this;e=e||{},a.options={autobind:e.autobind||!0,slugPrepend:e.slugPrepend||"",attributes:{prefix:"router",types:{field:"section",fieldDefault:"default",link:"href",pagination:"pagin",source:"src"}}},n=n||{},a.events={beforeInit:n.beforeInit,afterInit:n.afterInit,beforeMove:n.beforeMove,afterMove:n.afterMove},a.plugins={active:i||[],container:t.plugins},a.data={ids:[],activeId:null,defaultId:null,index:0},a.elements={}};return g.plugins={},g.prototype={init:h,moveTo:function(t){return v(this,t)},moveBy:function(t){return v(this,t)},moveForward:function(){return v(this,1)},moveBackward:function(){return v(this,-1)}},g}();