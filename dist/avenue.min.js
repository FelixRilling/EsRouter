var Avenue=function(){"use strict";var e=window,t=e.document,n=e.location,i=function(e,t){return"[data-"+e+"-"+t+"]"},a=function(e,t){return e+t.substr(0,1).toUpperCase()+t.substr(1)},o=function(e,t,n){return e.dataset[a(t,n)]},r=function(e,t,n,i){e.dataset[a(t,n)]=i},u=function(e){var n=Object.keys(e.types),a={};return n.forEach(function(n,o){var r=i(e.prefix,e.types[n]);a[n]=t.querySelectorAll(r)}),a},s=function(e,t){[].forEach.call(e,function(e){t(e)})},f=function(e,t,n){s(e,function(e){e.addEventListener(t,function(t){n(e,t)},!1)})},d=function(e,t){n.hash=e+t},l=function(e){return n.hash.replace(e,"").replace("#","")},c=function(e,t,n){function i(e,i){var a={data:t.data,options:t.options,elements:t.elements,methods:{slug:{setSlug:d,getSlug:l},dom:{queryElements:u,bind:f,readData:o,writeData:r}}},s=[n,a];i&&s.push(i),e.apply(t,s)}t.plugins.forEach(function(t){var n=t[0][e];n&&i(n,t[1])}),i(t.events[e])},p=function(){var e=this,t=e.options,n=l(e.options.slugPrepend);return c("beforeInit",e,{}),e.elements=u(t.attributes),t.autobind&&(f(e.elements.link,"click",function(n){var i=o(n,t.attributes.prefix,t.attributes.types.link);e.moveTo(i)}),f(e.elements.pagination,"click",function(n){var i=o(n,t.attributes.prefix,t.attributes.types.pagination);e.moveBy(+i)})),s(e.elements.field,function(n){var i=o(n,t.attributes.prefix,t.attributes.types.field);n===e.elements.fieldDefault[0]&&(e.data.defaultId=i),e.data.ids.push(i)}),""!==n?e.moveTo(n):e.moveTo(e.data.defaultId),c("afterInit",e,{}),e},v=function(e){var t=this;if(t.data.ids.indexOf(e)>-1){var n=t.data.ids.indexOf(e);c("beforeMove",t,{id:e,index:n,element:t.elements.field[n]}),t.data.activeId=e,t.data.index=n,d(t.options.slugPrepend,e),c("afterMove",t,{id:e,index:n,element:t.elements.field[n]})}return t},m=function(e){var t=this,n=t.data.ids[t.data.index+e];if(void 0!==n)return v.call(t,n)},b=function(e,t,n){var i=this;e=e||{},i.options={autobind:e.autobind||!0,slugPrepend:e.slugPrepend||"",attributes:{prefix:"router",types:{field:"section",fieldDefault:"default",link:"href",pagination:"pagin",source:"src"}}},t=t||{},i.events={beforeInit:t.beforeInit||function(){},afterInit:t.afterInit||function(){},beforeMove:t.beforeMove||function(){},afterMove:t.afterMove||function(){}},i.plugins=n||[],i.data={ids:[],activeId:null,defaultId:null,index:0},i.elements={}};return b.prototype={init:p,moveTo:v,moveBy:m,moveForward:function(){return this.moveBy(1)},moveBackward:function(){return this.moveBy(-1)}},b}();