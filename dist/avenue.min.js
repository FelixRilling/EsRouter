var Avenue=function(){"use strict";function e(e){var t=Object.keys(e.types),n={};return t.forEach(function(t,i){var a=f(e.prefix,e.types[t]);n[t]=u.querySelectorAll(a)}),n}function t(e,t,n){p(e,function(e){e.addEventListener(t,function(t){n(e,t)},!1)})}function n(n,i,a){function o(n,o){var r={data:i.data,options:i.options,elements:i.elements,methods:{dom:{queryElements:e,bind:t,readData:l,writeData:c},slug:{setSlug:v,getSlug:m}}},u=[a,r];o&&u.push(o),n.apply(i,u)}i.plugins.forEach(function(e){var t=e[0][n];t&&o(t,e[1])}),o(i.events[n])}function i(){var i=this,a=i.options,o=m(i.options.slugPrepend);return n("beforeInit",i,{}),i.elements=e(a.attributes),a.autobind&&(t(i.elements.link,"click",function(e){var t=l(e,a.attributes.prefix,a.attributes.types.link);i.moveTo(t)}),t(i.elements.pagination,"click",function(e){var t=l(e,a.attributes.prefix,a.attributes.types.pagination);i.moveBy(+t)})),p(i.elements.field,function(e){var t=l(e,a.attributes.prefix,a.attributes.types.field);e===i.elements.fieldDefault[0]&&(i.data.defaultId=t),i.data.ids.push(t)}),""!==o?i.moveTo(o):i.moveTo(i.data.defaultId),n("afterInit",i,{}),i}function a(e){var t=this;if(t.data.ids.indexOf(e)>-1){var i=t.data.ids.indexOf(e);n("beforeMove",t,{id:e,index:i,element:t.elements.field[i]}),t.data.activeId=e,t.data.index=i,v(t.options.slugPrepend,e),n("afterMove",t,{id:e,index:i,element:t.elements.field[i]})}return t}function o(e){var t=this,n=t.data.ids[t.data.index+e];if(void 0!==n)return a.call(t,n)}var r=window,u=r.document,s=r.location,f=function(e,t){return"[data-"+e+"-"+t+"]"},d=function(e,t){return e+t.substr(0,1).toUpperCase()+t.substr(1)},l=function(e,t,n){return e.dataset[d(t,n)]},c=function(e,t,n,i){e.dataset[d(t,n)]=i},p=function(e,t){[].forEach.call(e,function(e){t(e)})},v=function(e,t){s.hash=e+t},m=function(e){return s.hash.replace(e,"").replace("#","")},b=function(e,t,n){var i=this;e=e||{},i.options={autobind:e.autobind||!0,slugPrepend:e.slugPrepend||"",attributes:{prefix:"router",types:{field:"section",fieldDefault:"default",link:"href",pagination:"pagin",source:"src"}}},t=t||{},i.events={beforeInit:t.beforeInit||function(){},afterInit:t.afterInit||function(){},beforeMove:t.beforeMove||function(){},afterMove:t.afterMove||function(){}},i.plugins=n||[],i.data={ids:[],activeId:null,defaultId:null,index:0},i.elements={}};return b.prototype={init:i,moveTo:a,moveBy:o,moveForward:function(){return this.moveBy(1)},moveBackward:function(){return this.moveBy(-1)}},b}();